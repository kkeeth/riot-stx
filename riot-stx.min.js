let riotStx={cs:{},create(t,s){this.installState(t),riot.install(function(t){this.installRiotPlugin(t)}.bind(this))},installState(...t){stx=new Proxy({},{set:function(t,s,n){return JSON.stringify(t[s])!==JSON.stringify(n)&&(t[s]=n,this.updateComponentsState(s,n)),!0}.bind(this)}),t.forEach(t=>{this.deepExtend(stx,stx,t)})},updateComponentsState(t,s){this.cs[t]&&this.cs[t].forEach(n=>{n.stx[t]=s,n.update()})},installRiotPlugin(t){const{onBeforeMount:s,onMounted:n,onBeforeUpdate:e,onUpdated:i,onBeforeUnmount:o,onUnmounted:r}=t;t.stx=new Proxy(t.stx,{set:function(s,n,e){return void 0!==t.stx[n]&&JSON.stringify(s[n])!==JSON.stringify(e)?(s[n]=e,stx[n]=e):s[n]=e,!0}}),t.onBeforeMount=function(...n){for(let[s,n]of Object.entries(t.stx))"_"!=s[0]&&(this.cs[s]||(riotStx.cs[s]=[]),this.cs[s].push(t),void 0!==stx[s]&&(t.stx[s]=stx[s]));s&&s.apply(this,n)}.bind(this),t.onUnmounted=function(...s){if(this.cs)for(var n in riotStx.cs)this.cs[n].forEach((s,e)=>{s===t&&this.cs[n].splice(e,1)});r&&r.apply(this,s)}},setOneState(t,s){stx[t]=s},setState(t){this.deepExtend(stx,stx,t)},deepExtend(t){t=t||{};for(var s=1;s<arguments.length;s++){var n=arguments[s];if(n)for(var e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Array==1?t[e]=n[e].slice(0):t[e]=deepExtend(t[e],n[e]):t[e]=n[e])}return t}};
