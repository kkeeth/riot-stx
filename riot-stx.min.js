let riotStx={cs:{},create(t,o){riotStx.installState(t),riotStx.installRiot(o)},installState(t){window.stx=new Proxy({},{set:function(t,o,n){return JSON.stringify(t[o])!==JSON.stringify(n)&&(t[o]=n,riotStx.updateComponentsState(o,n)),!0}}),"object"==typeof t&&(stx=Object.assign(stx,t))},updateComponentsState(t,o){riotStx.cs[t]&&riotStx.cs[t].forEach(n=>{n.stx[t]=o,n.update()})},installRiot(t){riot.install(function(t){riotStx.installRiotPlugin(t)}),t&&riot.mount(t)},installRiotPlugin(t){const{onBeforeMount:o,onMounted:n,onBeforeUpdate:i,onUpdated:s,onBeforeUnmount:e,onUnmounted:r}=t;t.stx=new Proxy(t.stx,{set:function(o,n,i){return void 0!==t.stx[n]&&JSON.stringify(o[n])!==JSON.stringify(i)?(o[n]=i,stx[n]=i):o[n]=i,!0}}),t.onBeforeMount=function(...n){for(let[o,n]of Object.entries(t.stx))"_"!=o[0]&&(riotStx.cs[o]||(riotStx.cs[o]=[]),riotStx.cs[o].push(t),void 0!==stx[o]&&(t.stx[o]=stx[o]));o&&o.apply(this,n)},t.onUnmounted=function(...o){if(riotStx.cs)for(var n in riotStx.cs)riotStx.cs[n].forEach((o,i)=>{o===t&&riotStx.cs[n].splice(i,1)});r&&r.apply(this,o)}},setOneState(t,o){stx[t]=o},setState(t){for(var o in t)riotStx.setOneState(o,t[o])}};
