riotStx={cs:{},create(t,o){riotStx.installState(t),riot.install(function(t){riotStx.installRiotPlugin(t)})},installState(...t){stx=new Proxy({},{set:function(t,o,n){return JSON.stringify(t[o])!==JSON.stringify(n)&&(t[o]=n,riotStx.updateComponentsState(o,n)),!0}}),t.forEach(t=>{riotStx.deepExtend(stx,stx,t)})},updateComponentsState(t,o){riotStx.cs[t]&&riotStx.cs[t].forEach(n=>{n.stx[t]=o,n.update()})},installRiotPlugin(t){const{onBeforeMount:o,onMounted:n,onBeforeUpdate:e,onUpdated:i,onBeforeUnmount:r,onUnmounted:s}=t;t.stx=new Proxy(t.stx||{},{set:function(o,n,e){return void 0!==t.stx[n]&&JSON.stringify(o[n])!==JSON.stringify(e)?(o[n]=e,stx[n]=e):o[n]=e,!0}}),t.onBeforeMount=function(...n){for(let[o,n]of Object.entries(t.stx))"_"!=o[0]&&(riotStx.cs[o]||(riotStx.cs[o]=[]),riotStx.cs[o].push(t),void 0!==stx[o]&&(t.stx[o]=stx[o]));o&&o.apply(this,n)},t.onUnmounted=function(...o){if(riotStx.cs)for(var n in riotStx.cs)riotStx.cs[n].forEach((o,e)=>{o===t&&riotStx.cs[n].splice(e,1)});s&&s.apply(this,o)}},setOneState(t,o){stx[t]=o},setState(t){riotStx.deepExtend(stx,stx,t)},deepExtend(t){t=t||{};for(var o=1;o<arguments.length;o++){var n=arguments[o];if(n)for(var e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Array==1?t[e]=n[e].slice(0):t[e]=riotStx.deepExtend(t[e],n[e]):t[e]=n[e])}return t}};
